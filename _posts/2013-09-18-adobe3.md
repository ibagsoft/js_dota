---
layout: post
title: adobe3
tags: 类 继承 backbone
description: adobe第三天课程总结
---



> 可通过添加微信公共帐号`icodekata`，或者微博帐号`姜志辉iS`与我讨论

## Javascript的类体系

### 定义类

	function Class () {
		return function() {};
	}

### 定义构造函数

	function Class () {
		return function() {
			if(typeof this.initialize === 'function'){
				this.initialize.apply(this,arguments);
			}
		};
	}
	
### 定义公共实例方法

	function Class () {
		var klass = function() {
			if(typeof this.initialize === 'function'){
				this.initialize.apply(this,arguments);
			}
		};
		klass.method = function(name,func) {
			this.prototype[name] = func;
		};
		return klass;
	}
	
## Javascript的继承

### 对象的继承

####__proto__

	obj2.__proto__ = obj;
	
#### Object.create()

	var obj2 = Object.create(obj);
	
###  类的继承

#### prototype

	var Surrogate = function(){ this.constructor = child; };
    Surrogate.prototype = parent.prototype;
    child.prototype = new Surrogate;
    
#### 类抄写

	function Child (name) {
		Parent.call(this,name);
	}
	
#### 圣杯模式

	var klass = function() {
		if(typeof this.initialize === 'function'){
			this.initialize.apply(this,arguments);
		}
	};
	klass.method = function(name,func) {
		this.prototype[name] = func;
	};
	klass.extend = function() {
		var child = function() {
			klass.apply(this,arguments);
		};
		var Surrogate = function(){ this.constructor = child; };
    Surrogate.prototype = this.prototype;
    child.prototype = new Surrogate;
    child.prototype.__super__ = this.prototype;
		return child;
	};
	
#### 对象属性复制

	for(var name in options){
		child.prototype[name] = options[name];
	}

## Adobe.Model

### 使用代码

	var Todo = Adobe.Model.extend({
		initialize:function(title) {
			if(typeof title === 'string'){
				this.set({title:title});
			}
		}
	});
	var todo = new Todo('Test');
	console.log(typeof todo.get === 'function');
	console.log(typeof todo.initialize === 'function');

### 命名空间

	var Adobe = Adobe || {};
	var Model = Adobe.Model = function() {
		
	};
	
### 为Adobe.Model添加实例方法

	Model.prototype = {
		constructor:Model,
		get:function() {},
		set:function() {}
	}
	
### 继承

	Adobe.Model.extend = function() {
		var klass = function() {};
		var F = function() {};
		F.prototype = this.prototype;
		klass.prototype = new F();
		klass.prototype.__super__ = this.prototype;
		return klass;
	};
	
### 扩展

	for(var name in options){
		klass.prototype[name] = options[name];
	}
	
### 构造函数

	var klass = function() {
		if(typeof this.initialize === 'function'){
			this.initialize.apply(this,arguments);
		}
	};
	
### 揭示模块

	var Adobe = (function() {
		var Model =  function() {};
		Model.extend = function(options) {

		};
		Model.prototype = {
		}
		return {
			Model:Model
		}
	})();
	
### 最终的结果

	var Adobe = (function() {
		var Model =  function() {};
		Model.extend = function(options) {
			var klass = function() {
				if(typeof this.initialize === 'function'){
					this.initialize.apply(this,arguments);
				}
			};
			var F = function() {};
			F.prototype = this.prototype;
			klass.prototype = new F();
			klass.prototype.__super__ = this.prototype;

			for(var name in options){
				klass.prototype[name] = options[name];
			}
			return klass;
		};
		Model.prototype = {
			constructor:Model,
			get:function() {},
			set:function() {}
		}
		return {
			Model:Model
		}
	})();
	
## Adobe.View

### Adobe.View

	View.extend = 	Model.extend = function(options)

### 绑定事件

		var klass = function() {
			if(typeof this.initialize === 'function'){
				this.initialize.apply(this,arguments);
			}
			//Hack:
			var events = this.events || {};
			for(var item in events){
				var func = this[events[item]];
				var reg = /(.+)\s+(.+)/;
				var result = reg.exec(item);
				$(result[2]).bind(result[1],func);
			}
		};
		
###　绑定作用域

	function proxy (func,context) {
		return function() {
			func.apply(context,arguments);
		};
	}
	
			var events = this.events || {};
			for(var item in events){
				var func = proxy(this[events[item]],this);
				var reg = /(.+)\s+(.+)/;
				var result = reg.exec(item);
				$(result[2]).bind(result[1],func);
			}
			
			
### 关注点分离

	var View = function () {
		//Hack:
		var events = this.events || {};
		for(var item in events){
			var func = proxy(this[events[item]],this);
			var reg = /(.+)\s+(.+)/;
			var result = reg.exec(item);
			$(result[2]).bind(result[1],func);
		}
	};

		var parent = this;
		var klass = function() {
			if(typeof this.initialize === 'function'){
				this.initialize.apply(this,arguments);
			}
			parent.apply(this,arguments);
		};
	
### 完整版本

	var Adobe = (function() {
		var Model =  function() {};
		Model.prototype = {
			constructor:Model,
			get:function() {},
			set:function() {}
		}

		function proxy (func,context) {
			return function() {
				func.apply(context,arguments);
			};
		}

		var View = function () {
			//Hack:
			var events = this.events || {};
			for(var item in events){
				var func = proxy(this[events[item]],this);
				var reg = /(.+)\s+(.+)/;
				var result = reg.exec(item);
				$(result[2]).bind(result[1],func);
			}
		};

		View.extend = 	Model.extend = function(options) {
			var parent = this;
			var klass = function() {
				if(typeof this.initialize === 'function'){
					this.initialize.apply(this,arguments);
				}
				parent.apply(this,arguments);
			};
			var F = function() {};
			F.prototype = this.prototype;
			klass.prototype = new F();
			klass.prototype.__super__ = this.prototype;

			for(var name in options){
				klass.prototype[name] = options[name];
			}
			return klass;
		};
		return {
			Model:Model,
			View:View
		}
	})();
